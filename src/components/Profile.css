/* Profile page -- dark dashboard style */
.profile-page {
  min-height: 100vh;
  /* Dark space gradient background */
  background: linear-gradient(180deg, #0b0b10 0%, #111227 60%); 
  color: #fff;
  font-family: "Poppins", sans-serif;
  display: flex;
  justify-content: center;
  padding: 40px 20px;
  position: relative;
}

/* Close Button */
.close-btn {
  position: absolute;
  top: 20px;
  right: 20px;
  background: rgba(255, 255, 255, 0.08);
  color: white;
  font-size: 20px;
  border: none;
  cursor: pointer;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  transition: 0.2s ease;
  z-index: 10;
}
.close-btn:hover {
  color: #ff5555;
  background: rgba(255, 85, 85, 0.15);
  transform: scale(1.1);
}

/* Dashboard container */
.profile-dashboard {
  width: 100%;
  max-width: 1200px;
  display: grid;
  grid-template-columns: 320px 1fr; /* Sidebar and Main Content */
  gap: 28px;
  align-items: start;
}

/* --- Sidebar --- */
.profile-sidebar {
  background: rgba(255,255,255,0.03);
  border-radius: 14px;
  padding: 20px;
  border: 1px solid rgba(255,255,255,0.04);
  backdrop-filter: blur(8px);
}

.sidebar-top-section {
    padding-bottom: 20px;
    border-bottom: 1px solid rgba(255,255,255,0.05);
    margin-bottom: 20px;
}
.avatar-wrap { text-align: center; width: 100%; }
.profile-avatar {
  width: 120px; height: 120px; border-radius: 50%; border: 3px solid rgba(0, 245, 255, 0.2); 
  object-fit: cover; display: block; margin: 0 auto 10px; box-shadow: 0 4px 20px rgba(0, 245, 255, 0.06);
}
.sidebar-info h2 { margin: 0; font-size: 1.5rem; }
.bio { opacity: 0.8; margin-top: 6px; font-size: 0.95rem; }
.mini-stats { display:flex; gap:10px; justify-content: space-between; margin-top: 18px; padding: 0; }
.mini-stats div { text-align: center; font-size: 0.9rem; flex: 1; }
.mini-stats strong { display:block; font-size: 0.8rem; color:#bfefff; }
.mini-stats span { display:block; margin-top:6px; font-weight:700; font-size: 1.1rem; }

/* Sidebar Navigation Menu */
.sidebar-actions.new-menu {
  display: flex;
  flex-direction: column;
  gap: 8px;
}
.sidebar-actions.new-menu button {
  background: transparent;
  color: #dff7ff;
  border: none;
  padding: 10px 12px;
  border-radius: 8px;
  cursor: pointer;
  text-align: left;
  font-size: 1rem;
  transition: background 0.2s;
}
.sidebar-actions.new-menu button:hover {
  background: rgba(0,245,255,0.1);
}
.sidebar-actions.new-menu button label {
    display: block;
    cursor: pointer;
}


/* --- Main Area (Dynamic Content) --- */
.profile-main { display:flex; flex-direction:column; gap:20px; }
.dynamic-panel {
    background: rgba(255,255,255,0.02); 
    border-radius:14px; 
    padding:20px; 
    border:1px solid rgba(255,255,255,0.03);
    min-height: 500px;
}

h4 { color: #dff7ff; font-size: 1.2rem; margin: 0 0 15px 0; }

/* Dashboard and Ranking Cards */
.stat-cards-grid { 
    display:grid; grid-template-columns: 1fr 160px 160px 160px; gap:12px; align-items:stretch; margin-bottom: 20px;
}
.stat-card {
  background: rgba(255,255,255,0.02); border-radius:12px; padding:16px; border:1px solid rgba(255,255,255,0.03);
}
.stat-card.large { display:flex; align-items:center; justify-content:space-between; grid-column:span 1; }
.big-score { font-size:2.5rem; font-weight:800; color:#00f5ff; }
.ranking-card.full-width-card { width: 100%; padding: 14px; border-radius: 12px; border:1px solid rgba(255,255,255,0.03); }

/* Updated Ranking List */
.ranking-list {
    list-style: none;
    padding: 0;
    margin: 0;
}
.ranking-item {
    display: flex;
    align-items: center;
    padding: 10px 0;
    border-bottom: 1px dashed rgba(255,255,255,0.05);
    font-size: 0.95rem;
}
.ranking-item:last-child {
    border-bottom: none;
}
.rank-num {
    font-weight: 700;
    width: 30px;
    color: #00f5ff;
}
.team-name {
    flex: 1;
    font-weight: 600;
    margin-right: 10px;
}
.team-level {
    color: #bbb;
    font-size: 0.85rem;
    margin-right: 15px;
}
.team-xp {
    font-weight: 700;
    color: #ff9900;
    width: 80px;
    text-align: right;
}
.progress-bar-wrap {
    width: 100px;
    height: 6px;
    background: rgba(255,255,255,0.1);
    border-radius: 3px;
    margin-left: 10px;
}
.progress-bar {
    height: 100%;
    background: linear-gradient(90deg, #00f5ff, #00bfff);
    border-radius: 3px;
}

/* Friend Grid Styles */
.friend-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
  gap: 12px;
}
.friend-card {
  background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.07);
  border-radius: 10px; text-align: center; padding: 15px 10px;
  transition: transform 0.2s, background 0.2s; cursor: pointer;
}
.friend-initial {
  background: linear-gradient(135deg,#00f5ff,#ff33cc); color: #001018; border-radius: 50%;
  width: 50px; height: 50px; margin: 0 auto 8px; display: flex; align-items: center; justify-content: center;
  font-weight: 700; font-size: 1.4rem;
}
.friend-card h5 { margin: 0; }
.friend-card p { margin: 0; font-size: 0.85rem; color: #bfefff; }
.friend-card .friend-actions { margin-top: 10px; }
.friend-card .friend-actions button {
    padding: 6px 8px; border-radius: 6px; border: none; cursor: pointer;
    font-size: 0.8rem; font-weight: 600; background: #00bfff; color: #001018; 
}


/* --- Friend Detail Panel --- */
.friend-detail-panel {
    display: flex;
    flex-direction: column;
    gap: 20px;
}
.back-to-friends { 
    background: rgba(255,255,255,0.1); color: #fff; border: none; padding: 8px 12px; 
    border-radius: 8px; cursor: pointer; align-self: flex-start;
}
.friend-detail-header {
    display: flex;
    align-items: center;
    gap: 20px;
    padding-bottom: 20px;
    border-bottom: 1px solid rgba(255,255,255,0.05);
}
.friend-detail-header .friend-initial.large {
    width: 80px;
    height: 80px;
    font-size: 2.5rem;
}
.friend-detail-header h2 { margin: 0; font-size: 1.8rem; }
.friend-detail-actions {
    display: flex;
    gap: 15px;
}
.friend-detail-actions button {
    padding: 10px 20px;
    border-radius: 8px;
    border: none;
    cursor: pointer;
    font-weight: 700;
}
.chat-btn-action { background: #00f5ff; color: #001018; }
.add-friend-action { background: #ff9900; color: #001018; }
.remove-friend-action { background: #ff5555; color: #001018; }
.friend-detail-stats {
    padding: 15px;
    background: rgba(255,255,255,0.03);
    border-radius: 10px;
}
.stat-row { display: flex; justify-content: space-between; padding: 5px 0; border-bottom: 1px dashed rgba(255,255,255,0.02); }


/* --- Edit Profile Styles --- */
.edit-fields input, .edit-fields select, .edit-fields textarea {
    width: 100%;
    padding: 10px;
    border-radius: 8px;
    border: 1px solid rgba(255,255,255,0.1);
    background: rgba(255,255,255,0.05);
    color: #fff;
    font-size: 1rem;
    resize: vertical;
    margin-bottom: 10px;
}
.edit-fields select { 
    appearance: none; 
    background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='%2300f5ff'%3e%3cpath d='M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z'/%3e%3c/svg%3e");
    background-repeat: no-repeat;
    background-position: right 10px top 50%;
    background-size: 12px;
}
.edit-actions { margin-top: 15px; display: flex; gap: 10px; }
.edit-actions button {
    padding: 10px 15px; border-radius: 8px; border: none; cursor: pointer; font-weight: 700; transition: background 0.2s;
}
.save-btn { background: #00f5ff; color: #001018; }
.cancel-btn { background: rgba(255,255,255,0.2); color: #fff; }
.edit-btn { background: #ff9900; color: #001018; padding: 10px 15px; border-radius: 8px; font-weight: 700; border: none; cursor: pointer;}
.current-details { padding: 10px 0; }
.current-details p { margin: 5px 0; }

/* Character Grid */
.character-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
  gap: 12px;
}
.char-card {
  background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.07);
  border-radius: 10px; text-align: center; padding: 10px; transition: transform 0.2s, border-color 0.2s; cursor: pointer;
}
.char-card img { width: 60px; height: 60px; margin-bottom: 8px; }
.char-card.active { border-color: #00f5ff; box-shadow: 0 0 15px rgba(0,245,255,0.4); }


/* --- Chat Room Panels --- */
.chat-room {
    display: flex;
    flex-direction: column;
    min-height: 460px;
}
.chat-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-bottom: 10px;
    border-bottom: 1px solid rgba(255,255,255,0.05);
    margin-bottom: 10px;
}
.chat-messages {
    flex: 1;
    overflow-y: auto;
    padding: 8px;
    display: flex;
    flex-direction: column;
    gap: 12px;
}
.chat-msg.sent { align-self: flex-end; }
.chat-msg.received { align-self: flex-start; }
.chat-msg.system { align-self: center; text-align: center; }

.msg-bubble {
    border-radius: 10px; padding: 8px 12px; max-width: 75%;
}

/* 1-on-1 Friend Chat Colors */
.chat-room:not(.global-chat) .chat-msg.sent .msg-bubble {
    background: #00f5ff30; 
    border-left: 3px solid #00f5ff;
}
.chat-room:not(.global-chat) .chat-msg.received .msg-bubble {
    background: #ff33cc30; 
    border-right: 3px solid #ff33cc;
}

/* Global Chat Room Colors (Distinct Look) */
.chat-room.global-chat .chat-msg.sent .msg-bubble {
    background: #ff990030; /* Public sent */
    border-left: 3px solid #ff9900;
}
.chat-room.global-chat .chat-msg.received .msg-bubble {
    background: #4caf5030; /* Public received */
    border-right: 3px solid #4caf50;
}
.chat-room.global-chat .chat-msg.system .msg-bubble {
    background: #88888810; /* System message */
    border: 1px solid rgba(255,255,255,0.1);
    color: #bbb;
    font-style: italic;
    max-width: 90%;
}
.msg-bubble strong { display:block; color:inherit; font-size: 0.9rem; } /* Use bubble color for name */
.chat-room:not(.global-chat) .msg-bubble strong { color:#00f5ff; } /* Override for friend chat */
.chat-room.global-chat .msg-bubble strong { color:#ff9900; } /* Override for global chat */

.msg-bubble p { margin:3px 0; font-size: 0.95rem; }
.msg-bubble small { font-size:0.7rem; opacity:0.6; }
.chat-input {
    display: flex; gap: 8px; margin-top: 10px; padding-top: 10px; border-top: 1px solid rgba(255,255,255,0.05);
}
.chat-input input {
    flex: 1; padding: 10px; border-radius: 8px; border: none; background: rgba(255,255,255,0.05); color: #fff;
}
.chat-input button {
    background: linear-gradient(90deg,#00f5ff,#ff33cc); border: none; color: #001018;
    padding: 10px 15px; border-radius: 8px; cursor: pointer;
}

/* Testimonials Panel */
.testimonial-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
}
.testimonial-card {
    background: rgba(255,255,255,0.03);
    border-radius: 10px;
    padding: 15px;
    border-left: 4px solid #4caf50;
}
.testimonial-card blockquote {
    margin: 0 0 10px 0;
    padding: 0;
    font-style: italic;
    font-size: 0.95rem;
    line-height: 1.4;
}
.testimonial-footer {
    display: flex;
    align-items: center;
    margin-top: 10px;
}
.testimonial-avatar {
    width: 30px;
    height: 30px;
    border-radius: 50%;
    background: #ff9900;
    color: #111;
    display: flex;
    justify-content: center;
    align-items: center;
    font-weight: 700;
    margin-right: 10px;
    font-size: 0.8rem;
}
.testimonial-footer strong {
    display: block;
    margin-bottom: -3px;
    color: #fff;
}
.testimonial-footer p {
    margin: 0;
    font-size: 0.8rem;
    color: #bbb;
}
.note-card {
    margin-top: 20px;
    padding: 15px;
    background: rgba(0,245,255,0.1);
    border-radius: 8px;
    border: 1px solid #00f5ff20;
    color: #dff7ff;
}

/* --- Responsive Design --- */
@media (max-width: 768px) {
  .profile-dashboard { 
    grid-template-columns: 1fr; 
    gap: 20px; 
    max-width: 95%;
  }
  .stat-cards-grid { grid-template-columns: 1fr 1fr; }
  .stat-card.large { grid-column:span 2; }
  .ranking-item { flex-wrap: wrap; justify-content: space-between; }
  .team-level, .team-xp, .progress-bar-wrap { width: auto; margin-left: 0; }
  .testimonial-grid { grid-template-columns: 1fr; }
}

@media (max-width: 500px) {
  .stat-cards-grid { grid-template-columns: 1fr; }
  .stat-card.large { grid-column:span 1; }
  .ranking-item { font-size: 0.9rem; }
  .team-name { order: 1; flex-basis: 100%; margin-top: 5px; }
}